pipeline{
    agent any
    tool name: 'Node v18.15.0', type: 'nodejs'

    stages("x"){
        stage('Checkout') {
            echo 'Getting source code...'
            checkout scm
        }

        stage('Build') {
            echo 'Building dependencies...'
            sh 'npm i'
        }

        stage('Test') {
            echo 'Testing...'
            sh 'npm test'
        }

        stage('Publish') {
            echo 'Publishing Test Coverage...'
            post {
                always {
                    archiveArtifacts artifacts:
                    junit 'tests/reports/*.xml'
                }
            }
        }
    }



}